{
  "id": "b8b4e924-26d6-429e-bfb8-f5fc286e4f9f",
  "revision": 0,
  "last_node_id": 623,
  "last_link_id": 1074,
  "nodes": [
    {
      "id": 51,
      "type": "ClipLoaderGGUF",
      "pos": [
        -380,
        2190
      ],
      "size": [
        370,
        110
      ],
      "flags": {},
      "order": 0,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "CLIP",
          "type": "CLIP",
          "links": [
            1072
          ]
        }
      ],
      "properties": {
        "cnr_id": "gguf",
        "ver": "556ffba1a1dff3f5e1d1ad65c3103839883a824c",
        "Node name for S&R": "ClipLoaderGGUF",
        "ue_properties": {
          "version": "7.5.1",
          "widget_ue_connectable": {},
          "input_ue_unconnectable": {}
        }
      },
      "widgets_values": [
        "umt5-xxl-encoder-Q8_0.gguf",
        "wan",
        "default"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 41,
      "type": "VAELoader",
      "pos": [
        -380,
        2350
      ],
      "size": [
        370,
        60
      ],
      "flags": {},
      "order": 1,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "VAE",
          "type": "VAE",
          "slot_index": 0,
          "links": [
            118
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.34",
        "Node name for S&R": "VAELoader",
        "models": [
          {
            "name": "wan_2.1_vae.safetensors",
            "url": "https://huggingface.co/Comfy-Org/Wan_2.1_ComfyUI_repackaged/resolve/main/split_files/vae/wan_2.1_vae.safetensors",
            "hash": "2fc39d31359a4b0a64f55876d8ff7fa8d780956ae2cb13463b0223e15148976b",
            "hash_type": "SHA256",
            "directory": "vae"
          }
        ],
        "ue_properties": {
          "version": "7.5.1",
          "widget_ue_connectable": {},
          "input_ue_unconnectable": {}
        }
      },
      "widgets_values": [
        "wan_2.1_vae.safetensors"
      ],
      "color": "#322",
      "bgcolor": "#533"
    },
    {
      "id": 488,
      "type": "GetNode",
      "pos": [
        672.9565248869264,
        1682.772050848587
      ],
      "size": [
        210,
        58
      ],
      "flags": {},
      "order": 2,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [
            925
          ]
        }
      ],
      "title": "Get_MODEL",
      "properties": {
        "ue_properties": {
          "version": "7.5.1",
          "widget_ue_connectable": {},
          "input_ue_unconnectable": {}
        }
      },
      "widgets_values": [
        "MODEL"
      ],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 489,
      "type": "GetNode",
      "pos": [
        672.9565248869264,
        1792.772050848587
      ],
      "size": [
        210,
        58
      ],
      "flags": {},
      "order": 3,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "CLIP",
          "type": "CLIP",
          "links": [
            780,
            782,
            862
          ]
        }
      ],
      "title": "Get_CLIP",
      "properties": {
        "ue_properties": {
          "version": "7.5.1",
          "widget_ue_connectable": {},
          "input_ue_unconnectable": {}
        }
      },
      "widgets_values": [
        "CLIP"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 490,
      "type": "GetNode",
      "pos": [
        672.9565248869264,
        1902.7720508485875
      ],
      "size": [
        210,
        58
      ],
      "flags": {},
      "order": 4,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "VAE",
          "type": "VAE",
          "links": [
            788,
            795
          ]
        }
      ],
      "title": "Get_VAE",
      "properties": {
        "ue_properties": {
          "version": "7.5.1",
          "widget_ue_connectable": {},
          "input_ue_unconnectable": {}
        }
      },
      "widgets_values": [
        "VAE"
      ],
      "color": "#322",
      "bgcolor": "#533"
    },
    {
      "id": 572,
      "type": "ImageResizeKJ",
      "pos": [
        1721.4855258615403,
        2569.6160593299905
      ],
      "size": [
        315,
        266
      ],
      "flags": {},
      "order": 36,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 1005
        },
        {
          "name": "get_image_size",
          "shape": 7,
          "type": "IMAGE",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "slot_index": 0,
          "links": [
            941,
            943,
            949
          ]
        },
        {
          "name": "width",
          "type": "INT",
          "links": [
            945
          ]
        },
        {
          "name": "height",
          "type": "INT",
          "links": [
            946
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "1.1.9",
        "Node name for S&R": "ImageResizeKJ",
        "ue_properties": {
          "widget_ue_connectable": {},
          "version": "7.4.1",
          "input_ue_unconnectable": {}
        }
      },
      "widgets_values": [
        960,
        544,
        "lanczos",
        false,
        2,
        0
      ]
    },
    {
      "id": 568,
      "type": "ImageConcatMulti",
      "pos": [
        3698.2953300940894,
        2731.9372858686197
      ],
      "size": [
        270,
        170
      ],
      "flags": {},
      "order": 50,
      "mode": 0,
      "inputs": [
        {
          "name": "image_1",
          "type": "IMAGE",
          "link": 948
        },
        {
          "name": "image_2",
          "shape": 7,
          "type": "IMAGE",
          "link": 949
        },
        {
          "name": "image_3",
          "type": "IMAGE",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "links": [
            947
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "1.1.2",
        "ue_properties": {
          "version": "7.5.1",
          "widget_ue_connectable": {},
          "input_ue_unconnectable": {}
        }
      },
      "widgets_values": [
        2,
        "down",
        true,
        null
      ]
    },
    {
      "id": 574,
      "type": "GetImageRangeFromBatch",
      "pos": [
        2193.46677598811,
        2583.4362434682357
      ],
      "size": [
        280.3267578125,
        110
      ],
      "flags": {},
      "order": 39,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "shape": 7,
          "type": "IMAGE",
          "link": 941
        },
        {
          "name": "masks",
          "shape": 7,
          "type": "MASK",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            942,
            944
          ]
        },
        {
          "name": "MASK",
          "type": "MASK",
          "links": null
        }
      ],
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "1.1.2",
        "Node name for S&R": "GetImageRangeFromBatch",
        "ue_properties": {
          "version": "7.5.1",
          "widget_ue_connectable": {},
          "input_ue_unconnectable": {}
        }
      },
      "widgets_values": [
        0,
        1
      ]
    },
    {
      "id": 576,
      "type": "VHS_VideoCombine",
      "pos": [
        4131.080787303518,
        2721.2566399491957
      ],
      "size": [
        521.4673226853083,
        916.3296323766828
      ],
      "flags": {},
      "order": 53,
      "mode": 0,
      "inputs": [
        {
          "label": "images",
          "name": "images",
          "type": "IMAGE",
          "link": 947
        },
        {
          "label": "audio",
          "name": "audio",
          "shape": 7,
          "type": "AUDIO",
          "link": null
        },
        {
          "label": "meta_batch",
          "name": "meta_batch",
          "shape": 7,
          "type": "VHS_BatchManager",
          "link": null
        },
        {
          "label": "vae",
          "name": "vae",
          "shape": 7,
          "type": "VAE",
          "link": null
        }
      ],
      "outputs": [
        {
          "label": "Filenames",
          "name": "Filenames",
          "type": "VHS_FILENAMES"
        }
      ],
      "properties": {
        "cnr_id": "comfyui-videohelpersuite",
        "ver": "0a75c7958fe320efcb052f1d9f8451fd20c730a8",
        "Node name for S&R": "VHS_VideoCombine",
        "ue_properties": {
          "version": "7.5.1",
          "widget_ue_connectable": {
            "frame_rate": true,
            "loop_count": true,
            "filename_prefix": true,
            "format": true,
            "pingpong": true,
            "save_output": true
          },
          "input_ue_unconnectable": {}
        }
      },
      "widgets_values": {
        "frame_rate": 16,
        "loop_count": 0,
        "filename_prefix": "vace_repaint_out",
        "format": "video/h264-mp4",
        "pix_fmt": "yuv420p",
        "crf": 19,
        "save_metadata": true,
        "trim_to_audio": false,
        "pingpong": false,
        "save_output": false,
        "videopreview": {
          "paused": false,
          "hidden": false,
          "params": {
            "filename": "vace_repaint_out_00020.mp4",
            "workflow": "vace_repaint_out_00020.png",
            "fullpath": "/code/ComfyUI/temp/vace_repaint_out_00020.mp4",
            "format": "video/h264-mp4",
            "subfolder": "",
            "type": "temp",
            "frame_rate": 16
          }
        }
      }
    },
    {
      "id": 501,
      "type": "WanVaceToVideo",
      "pos": [
        2330.3548145378704,
        2137.530216512362
      ],
      "size": [
        280,
        260
      ],
      "flags": {},
      "order": 45,
      "mode": 0,
      "inputs": [
        {
          "name": "positive",
          "type": "CONDITIONING",
          "link": 786
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "link": 787
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": 788
        },
        {
          "name": "control_video",
          "shape": 7,
          "type": "IMAGE",
          "link": 943
        },
        {
          "name": "control_masks",
          "shape": 7,
          "type": "MASK",
          "link": 1046
        },
        {
          "name": "reference_image",
          "shape": 7,
          "type": "IMAGE",
          "link": 944
        },
        {
          "name": "width",
          "type": "INT",
          "widget": {
            "name": "width"
          },
          "link": 945
        },
        {
          "name": "height",
          "type": "INT",
          "widget": {
            "name": "height"
          },
          "link": 946
        },
        {
          "name": "length",
          "type": "INT",
          "widget": {
            "name": "length"
          },
          "link": 1062
        }
      ],
      "outputs": [
        {
          "name": "positive",
          "type": "CONDITIONING",
          "links": [
            823,
            830
          ]
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "links": [
            824,
            831
          ]
        },
        {
          "name": "latent",
          "type": "LATENT",
          "links": [
            825
          ]
        },
        {
          "name": "trim_latent",
          "type": "INT",
          "links": [
            785
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.34",
        "Node name for S&R": "WanVaceToVideo",
        "ue_properties": {
          "version": "7.5.1",
          "widget_ue_connectable": {},
          "input_ue_unconnectable": {}
        }
      },
      "widgets_values": [
        960,
        544,
        25,
        1,
        1
      ],
      "color": "#332922",
      "bgcolor": "#593930"
    },
    {
      "id": 623,
      "type": "VHS_VideoCombine",
      "pos": [
        5239.402438944621,
        2760.669661295576
      ],
      "size": [
        521.4673226853083,
        632.1648161883413
      ],
      "flags": {},
      "order": 54,
      "mode": 0,
      "inputs": [
        {
          "label": "images",
          "name": "images",
          "type": "IMAGE",
          "link": 1067
        },
        {
          "label": "audio",
          "name": "audio",
          "shape": 7,
          "type": "AUDIO",
          "link": null
        },
        {
          "label": "meta_batch",
          "name": "meta_batch",
          "shape": 7,
          "type": "VHS_BatchManager",
          "link": null
        },
        {
          "label": "vae",
          "name": "vae",
          "shape": 7,
          "type": "VAE",
          "link": null
        }
      ],
      "outputs": [
        {
          "label": "Filenames",
          "name": "Filenames",
          "type": "VHS_FILENAMES"
        }
      ],
      "properties": {
        "cnr_id": "comfyui-videohelpersuite",
        "ver": "0a75c7958fe320efcb052f1d9f8451fd20c730a8",
        "Node name for S&R": "VHS_VideoCombine",
        "ue_properties": {
          "version": "7.5.1",
          "widget_ue_connectable": {
            "frame_rate": true,
            "loop_count": true,
            "filename_prefix": true,
            "format": true,
            "pingpong": true,
            "save_output": true
          },
          "input_ue_unconnectable": {}
        }
      },
      "widgets_values": {
        "frame_rate": 16,
        "loop_count": 0,
        "filename_prefix": "vace_repaint_out",
        "format": "video/h264-mp4",
        "pix_fmt": "yuv420p",
        "crf": 19,
        "save_metadata": true,
        "trim_to_audio": false,
        "pingpong": false,
        "save_output": false,
        "videopreview": {
          "paused": false,
          "hidden": false,
          "params": {
            "filename": "vace_repaint_out_00021.mp4",
            "workflow": "vace_repaint_out_00021.png",
            "fullpath": "/code/ComfyUI/temp/vace_repaint_out_00021.mp4",
            "format": "video/h264-mp4",
            "subfolder": "",
            "type": "temp",
            "frame_rate": 16
          }
        }
      }
    },
    {
      "id": 575,
      "type": "PreviewImage",
      "pos": [
        2743.540769541664,
        2720.9506833393452
      ],
      "size": [
        547.7620485882849,
        320.2205125590733
      ],
      "flags": {},
      "order": 41,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 942
        }
      ],
      "outputs": [],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.68",
        "Node name for S&R": "PreviewImage",
        "ue_properties": {
          "widget_ue_connectable": {},
          "input_ue_unconnectable": {},
          "version": "7.5.1"
        }
      },
      "widgets_values": []
    },
    {
      "id": 618,
      "type": "ImageResizeKJ",
      "pos": [
        1266.360865986603,
        3595.921605005572
      ],
      "size": [
        315,
        266
      ],
      "flags": {},
      "order": 17,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 1054
        },
        {
          "name": "get_image_size",
          "shape": 7,
          "type": "IMAGE",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "slot_index": 0,
          "links": [
            1058
          ]
        },
        {
          "name": "width",
          "type": "INT",
          "links": null
        },
        {
          "name": "height",
          "type": "INT",
          "links": null
        }
      ],
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "1.1.9",
        "Node name for S&R": "ImageResizeKJ",
        "ue_properties": {
          "widget_ue_connectable": {},
          "version": "7.4.1",
          "input_ue_unconnectable": {}
        }
      },
      "widgets_values": [
        832,
        480,
        "lanczos",
        false,
        2,
        0
      ]
    },
    {
      "id": 582,
      "type": "ImageResizeKJ",
      "pos": [
        1709.5904791535995,
        3576.0568620960676
      ],
      "size": [
        315,
        266
      ],
      "flags": {},
      "order": 21,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 1058
        },
        {
          "name": "get_image_size",
          "shape": 7,
          "type": "IMAGE",
          "link": null
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "slot_index": 0,
          "links": [
            1001,
            1059,
            1065
          ]
        },
        {
          "name": "width",
          "type": "INT",
          "links": [
            1019,
            1023
          ]
        },
        {
          "name": "height",
          "type": "INT",
          "links": [
            1020,
            1024
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "1.1.9",
        "Node name for S&R": "ImageResizeKJ",
        "ue_properties": {
          "widget_ue_connectable": {},
          "version": "7.4.1",
          "input_ue_unconnectable": {}
        }
      },
      "widgets_values": [
        832,
        480,
        "lanczos",
        false,
        2,
        0
      ]
    },
    {
      "id": 584,
      "type": "VHS_SelectEveryNthImage",
      "pos": [
        2363.4377407013494,
        3930.2984212326996
      ],
      "size": [
        266.349609375,
        102
      ],
      "flags": {},
      "order": 25,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 1059
        },
        {
          "name": "select_every_nth",
          "type": "INT",
          "widget": {
            "name": "select_every_nth"
          },
          "link": 995
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            1002
          ]
        },
        {
          "name": "count",
          "type": "INT",
          "links": []
        }
      ],
      "properties": {
        "cnr_id": "comfyui-videohelpersuite",
        "ver": "1.7.7",
        "Node name for S&R": "VHS_SelectEveryNthImage",
        "ue_properties": {
          "widget_ue_connectable": {},
          "input_ue_unconnectable": {},
          "version": "7.5.1"
        }
      },
      "widgets_values": {
        "select_every_nth": 1,
        "skip_first_images": 0
      }
    },
    {
      "id": 586,
      "type": "Int",
      "pos": [
        1687.2480195944827,
        4334.683436143536
      ],
      "size": [
        270,
        58
      ],
      "flags": {},
      "order": 5,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "INT",
          "type": "INT",
          "links": [
            995,
            997,
            1028
          ]
        }
      ],
      "properties": {
        "cnr_id": "ComfyLiterals",
        "ver": "bdddb08ca82d90d75d97b1d437a652e0284a32ac",
        "Node name for S&R": "Int",
        "ue_properties": {
          "widget_ue_connectable": {},
          "input_ue_unconnectable": {},
          "version": "7.5.1"
        }
      },
      "widgets_values": [
        "16"
      ]
    },
    {
      "id": 585,
      "type": "easy rangeInt",
      "pos": [
        2096.190452607361,
        4328.019395309661
      ],
      "size": [
        220,
        174
      ],
      "flags": {},
      "order": 18,
      "mode": 0,
      "inputs": [
        {
          "name": "stop",
          "type": "INT",
          "widget": {
            "name": "stop"
          },
          "link": 1060
        },
        {
          "name": "step",
          "type": "INT",
          "widget": {
            "name": "step"
          },
          "link": 997
        }
      ],
      "outputs": [
        {
          "name": "range",
          "shape": 6,
          "type": "INT",
          "links": [
            998
          ]
        },
        {
          "name": "range_sizes",
          "shape": 6,
          "type": "INT",
          "links": []
        }
      ],
      "properties": {
        "cnr_id": "comfyui-easy-use",
        "ver": "fa7c5d8b4d964abb9a444ad1c5ab32e127c60f72",
        "Node name for S&R": "easy rangeInt",
        "ue_properties": {
          "widget_ue_connectable": {
            "range_mode": true,
            "start": true,
            "stop": true,
            "step": true,
            "num_steps": true,
            "end_mode": true
          },
          "version": "7.5.1",
          "input_ue_unconnectable": {}
        }
      },
      "widgets_values": [
        "step",
        0,
        15,
        10,
        4,
        "Exclusive"
      ],
      "color": "#222",
      "bgcolor": "#000",
      "shape": 1
    },
    {
      "id": 587,
      "type": "CR Integer To String",
      "pos": [
        2385.096937868659,
        4325.197819758934
      ],
      "size": [
        220,
        50
      ],
      "flags": {},
      "order": 22,
      "mode": 0,
      "inputs": [
        {
          "name": "int_",
          "type": "INT",
          "link": 998
        }
      ],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "links": [
            999
          ]
        },
        {
          "name": "show_help",
          "type": "STRING",
          "links": null
        }
      ],
      "properties": {
        "cnr_id": "ComfyUI_Comfyroll_CustomNodes",
        "ver": "d78b780ae43fcf8c6b7c6505e6ffb4584281ceca",
        "Node name for S&R": "CR Integer To String",
        "ue_properties": {
          "widget_ue_connectable": {},
          "version": "7.5.1",
          "input_ue_unconnectable": {}
        }
      },
      "widgets_values": [],
      "color": "#222",
      "bgcolor": "#000",
      "shape": 1
    },
    {
      "id": 588,
      "type": "StringListToString",
      "pos": [
        2672.093182088379,
        4323.538865251361
      ],
      "size": [
        220,
        60
      ],
      "flags": {},
      "order": 28,
      "mode": 0,
      "inputs": [
        {
          "name": "string_list",
          "type": "STRING",
          "link": 999
        }
      ],
      "outputs": [
        {
          "name": "STRING",
          "type": "STRING",
          "links": [
            1000,
            1003,
            1049
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfyui-impact-pack",
        "ver": "2346b677666e14ad53a6e65e16a33289a78106c7",
        "Node name for S&R": "StringListToString",
        "ue_properties": {
          "widget_ue_connectable": {
            "join_with": true
          },
          "version": "7.5.1",
          "input_ue_unconnectable": {}
        }
      },
      "widgets_values": [
        ", "
      ],
      "color": "#222",
      "bgcolor": "#000",
      "shape": 1
    },
    {
      "id": 590,
      "type": "InsertImagesToBatchIndexed",
      "pos": [
        2778.8090657888806,
        3550.470371506992
      ],
      "size": [
        400,
        200
      ],
      "flags": {},
      "order": 33,
      "mode": 0,
      "inputs": [
        {
          "name": "original_images",
          "type": "IMAGE",
          "link": 1001
        },
        {
          "name": "images_to_insert",
          "type": "IMAGE",
          "link": 1002
        },
        {
          "name": "indexes",
          "type": "STRING",
          "widget": {
            "name": "indexes"
          },
          "link": 1003
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            1005,
            1037
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "1.1.9",
        "Node name for S&R": "InsertImagesToBatchIndexed",
        "ue_properties": {
          "widget_ue_connectable": {},
          "input_ue_unconnectable": {},
          "version": "7.5.1"
        }
      },
      "widgets_values": [
        "10, 1, 2",
        "replace"
      ]
    },
    {
      "id": 589,
      "type": "ShowText|pysssss",
      "pos": [
        2798.36152088456,
        3810.5675095770066
      ],
      "size": [
        370.24225878552625,
        127.09775144593004
      ],
      "flags": {},
      "order": 32,
      "mode": 0,
      "inputs": [
        {
          "name": "text",
          "type": "STRING",
          "link": 1000
        }
      ],
      "outputs": [
        {
          "name": "STRING",
          "shape": 6,
          "type": "STRING",
          "links": null
        }
      ],
      "properties": {
        "cnr_id": "comfyui-custom-scripts",
        "ver": "1.2.5",
        "Node name for S&R": "ShowText|pysssss",
        "ue_properties": {
          "widget_ue_connectable": {},
          "input_ue_unconnectable": {},
          "version": "7.5.1"
        }
      },
      "widgets_values": [
        "0, 16, 32, 48, 64, 80, 96, 112, 128, 144, 160, 176, 192, 208, 224, 240"
      ]
    },
    {
      "id": 597,
      "type": "SolidMask",
      "pos": [
        3515.029550868585,
        3712.046801393546
      ],
      "size": [
        220,
        230
      ],
      "flags": {},
      "order": 26,
      "mode": 0,
      "inputs": [
        {
          "name": "width",
          "type": "INT",
          "widget": {
            "name": "width"
          },
          "link": 1019
        },
        {
          "name": "height",
          "type": "INT",
          "widget": {
            "name": "height"
          },
          "link": 1020
        }
      ],
      "outputs": [
        {
          "name": "MASK",
          "type": "MASK",
          "links": [
            1014
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.38",
        "Node name for S&R": "SolidMask",
        "ue_properties": {
          "widget_ue_connectable": {
            "value": true,
            "width": true,
            "height": true
          },
          "version": "7.5.1",
          "input_ue_unconnectable": {}
        }
      },
      "widgets_values": [
        1,
        768,
        768
      ],
      "color": "#222",
      "bgcolor": "#000",
      "shape": 1
    },
    {
      "id": 604,
      "type": "SolidMask",
      "pos": [
        3518.6354239113307,
        3990.6889140646795
      ],
      "size": [
        220,
        230
      ],
      "flags": {},
      "order": 27,
      "mode": 0,
      "inputs": [
        {
          "name": "width",
          "type": "INT",
          "widget": {
            "name": "width"
          },
          "link": 1023
        },
        {
          "name": "height",
          "type": "INT",
          "widget": {
            "name": "height"
          },
          "link": 1024
        }
      ],
      "outputs": [
        {
          "name": "MASK",
          "type": "MASK",
          "links": [
            1025
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.38",
        "Node name for S&R": "SolidMask",
        "ue_properties": {
          "widget_ue_connectable": {
            "value": true,
            "width": true,
            "height": true
          },
          "version": "7.5.1",
          "input_ue_unconnectable": {}
        }
      },
      "widgets_values": [
        0,
        768,
        768
      ],
      "color": "#222",
      "bgcolor": "#000",
      "shape": 1
    },
    {
      "id": 599,
      "type": "MaskToImage",
      "pos": [
        3891.1663499044885,
        3737.7296983189494
      ],
      "size": [
        184.6236328125,
        26
      ],
      "flags": {},
      "order": 30,
      "mode": 0,
      "inputs": [
        {
          "name": "mask",
          "type": "MASK",
          "link": 1014
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            1016
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.68",
        "Node name for S&R": "MaskToImage",
        "ue_properties": {
          "widget_ue_connectable": {},
          "input_ue_unconnectable": {},
          "version": "7.5.1"
        }
      },
      "widgets_values": []
    },
    {
      "id": 596,
      "type": "RepeatImageBatch",
      "pos": [
        4054.9363599988415,
        3880.9066244299875
      ],
      "size": [
        220,
        60
      ],
      "flags": {},
      "order": 35,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 1016
        },
        {
          "name": "amount",
          "type": "INT",
          "widget": {
            "name": "amount"
          },
          "link": 1070
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            1029,
            1032
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.38",
        "Node name for S&R": "RepeatImageBatch",
        "ue_properties": {
          "widget_ue_connectable": {
            "amount": true
          },
          "version": "7.5.1",
          "input_ue_unconnectable": {}
        }
      },
      "widgets_values": [
        3
      ],
      "color": "#222",
      "bgcolor": "#000",
      "shape": 1
    },
    {
      "id": 605,
      "type": "MaskToImage",
      "pos": [
        3934.7971794278715,
        4099.412142012849
      ],
      "size": [
        184.6236328125,
        26
      ],
      "flags": {},
      "order": 31,
      "mode": 0,
      "inputs": [
        {
          "name": "mask",
          "type": "MASK",
          "link": 1025
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            1026
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.68",
        "Node name for S&R": "MaskToImage",
        "ue_properties": {
          "widget_ue_connectable": {},
          "input_ue_unconnectable": {},
          "version": "7.5.1"
        }
      },
      "widgets_values": []
    },
    {
      "id": 603,
      "type": "VHS_SelectEveryNthImage",
      "pos": [
        4389.684780832345,
        3950.7975400129135
      ],
      "size": [
        266.349609375,
        102
      ],
      "flags": {},
      "order": 38,
      "mode": 0,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 1029
        },
        {
          "name": "select_every_nth",
          "type": "INT",
          "widget": {
            "name": "select_every_nth"
          },
          "link": 1028
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": []
        },
        {
          "name": "count",
          "type": "INT",
          "links": [
            1030
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfyui-videohelpersuite",
        "ver": "1.7.7",
        "Node name for S&R": "VHS_SelectEveryNthImage",
        "ue_properties": {
          "widget_ue_connectable": {},
          "input_ue_unconnectable": {},
          "version": "7.5.1"
        }
      },
      "widgets_values": {
        "select_every_nth": 1,
        "skip_first_images": 0
      }
    },
    {
      "id": 494,
      "type": "Int",
      "pos": [
        2321.609712542058,
        2025.0521424957817
      ],
      "size": [
        280,
        60
      ],
      "flags": {},
      "order": 6,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "INT",
          "type": "INT",
          "links": [
            827,
            834,
            836
          ]
        }
      ],
      "title": "Total Steps",
      "properties": {
        "cnr_id": "ComfyLiterals",
        "ver": "bdddb08ca82d90d75d97b1d437a652e0284a32ac",
        "Node name for S&R": "Int",
        "ue_properties": {
          "version": "7.5.1",
          "widget_ue_connectable": {
            "Number": true
          },
          "input_ue_unconnectable": {}
        }
      },
      "widgets_values": [
        "2"
      ],
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 495,
      "type": "Int",
      "pos": [
        2324.172529466257,
        1909.430332116428
      ],
      "size": [
        280,
        60
      ],
      "flags": {},
      "order": 7,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "INT",
          "type": "INT",
          "links": [
            828,
            835
          ]
        }
      ],
      "title": "Speed Optimization Start Steps",
      "properties": {
        "cnr_id": "ComfyLiterals",
        "ver": "bdddb08ca82d90d75d97b1d437a652e0284a32ac",
        "Node name for S&R": "Int",
        "ue_properties": {
          "version": "7.5.1",
          "widget_ue_connectable": {
            "Number": true
          },
          "input_ue_unconnectable": {}
        }
      },
      "widgets_values": [
        "0"
      ],
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 499,
      "type": "PrimitiveInt",
      "pos": [
        2316.3391451752427,
        1777.6771942337728
      ],
      "size": [
        310,
        82
      ],
      "flags": {},
      "order": 8,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "INT",
          "type": "INT",
          "links": [
            826,
            833
          ]
        }
      ],
      "properties": {
        "cnr_id": "cg-use-everywhere",
        "ver": "6.1.0",
        "Node name for S&R": "Seed Everywhere",
        "ue_properties": {
          "version": "7.5.1",
          "group_restricted": 0,
          "color_restricted": 0,
          "widget_ue_connectable": {},
          "input_ue_unconnectable": {},
          "title_regex": 107324378635127,
          "input_regex": "fixed",
          "fixed_inputs": true,
          "seed_inputs": true
        },
        "ue_convert": true
      },
      "widgets_values": [
        107324378635127,
        "fixed"
      ]
    },
    {
      "id": 521,
      "type": "KSamplerAdvanced",
      "pos": [
        2944.0583013523587,
        2072.2148335151555
      ],
      "size": [
        405.9512546863134,
        392.70832352488515
      ],
      "flags": {},
      "order": 46,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 822
        },
        {
          "name": "positive",
          "type": "CONDITIONING",
          "link": 823
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "link": 824
        },
        {
          "name": "latent_image",
          "type": "LATENT",
          "link": 825
        },
        {
          "name": "noise_seed",
          "type": "INT",
          "widget": {
            "name": "noise_seed"
          },
          "link": 826
        },
        {
          "name": "steps",
          "type": "INT",
          "widget": {
            "name": "steps"
          },
          "link": 827
        },
        {
          "name": "end_at_step",
          "type": "INT",
          "widget": {
            "name": "end_at_step"
          },
          "link": 828
        }
      ],
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": [
            832
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.33",
        "Node name for S&R": "KSamplerAdvanced",
        "ue_properties": {
          "version": "7.5.1",
          "widget_ue_connectable": {},
          "input_ue_unconnectable": {}
        }
      },
      "widgets_values": [
        "enable",
        581528253564326,
        "fixed",
        15,
        1,
        "uni_pc",
        "simple",
        0,
        3,
        "disable"
      ]
    },
    {
      "id": 621,
      "type": "ContextWindowsManual",
      "pos": [
        3458.9686270107036,
        1984.5839120051469
      ],
      "size": [
        270,
        202
      ],
      "flags": {},
      "order": 34,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 1063
        }
      ],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [
            1064
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.60",
        "Node name for S&R": "ContextWindowsManual",
        "ue_properties": {
          "widget_ue_connectable": {},
          "version": "7.5.1",
          "input_ue_unconnectable": {}
        }
      },
      "widgets_values": [
        384,
        2,
        "standard_uniform",
        1,
        false,
        "pyramid",
        0
      ]
    },
    {
      "id": 36,
      "type": "UnetLoaderGGUF",
      "pos": [
        -458.6009902932533,
        1809.5394199914094
      ],
      "size": [
        438.339970682905,
        58
      ],
      "flags": {},
      "order": 9,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [
            1074
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfyui-gguf",
        "ver": "6570efec6992015085f11b84e42d32f6cc71e8b7",
        "Node name for S&R": "UnetLoaderGGUF",
        "ue_properties": {
          "version": "7.5.1",
          "widget_ue_connectable": {},
          "input_ue_unconnectable": {}
        }
      },
      "widgets_values": [
        "SkyReels-V2-T2V-14B-720P-VACE-Q5_K_S.gguf"
      ]
    },
    {
      "id": 49,
      "type": "PathchSageAttentionKJ",
      "pos": [
        21.560927549776608,
        1785.455746719245
      ],
      "size": [
        344.49756010146734,
        58
      ],
      "flags": {},
      "order": 16,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 1074
        }
      ],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [
            704
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "5dcda71011870278c35d92ff77a677ed2e538f2d",
        "Node name for S&R": "PathchSageAttentionKJ",
        "ue_properties": {
          "version": "7.5.1",
          "widget_ue_connectable": {},
          "input_ue_unconnectable": {}
        }
      },
      "widgets_values": [
        "sageattn_qk_int8_pv_fp16_cuda"
      ],
      "color": "#222",
      "bgcolor": "#000"
    },
    {
      "id": 429,
      "type": "ModelPatchTorchSettings",
      "pos": [
        59.348334239480074,
        1902.4095921088804
      ],
      "size": [
        280,
        60
      ],
      "flags": {},
      "order": 20,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 704
        }
      ],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "links": [
            1073
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "5dcda71011870278c35d92ff77a677ed2e538f2d",
        "Node name for S&R": "ModelPatchTorchSettings",
        "ue_properties": {
          "version": "7.5.1",
          "widget_ue_connectable": {},
          "input_ue_unconnectable": {}
        }
      },
      "widgets_values": [
        true
      ],
      "color": "#222",
      "bgcolor": "#000"
    },
    {
      "id": 113,
      "type": "SetNode",
      "pos": [
        143.03804149137153,
        2346.673608184362
      ],
      "size": [
        210,
        60
      ],
      "flags": {},
      "order": 13,
      "mode": 0,
      "inputs": [
        {
          "name": "VAE",
          "type": "VAE",
          "link": 118
        }
      ],
      "outputs": [
        {
          "name": "*",
          "type": "*",
          "links": null
        }
      ],
      "title": "Set_VAE",
      "properties": {
        "previousName": "VAE",
        "ue_properties": {
          "version": "7.5.1",
          "widget_ue_connectable": {},
          "input_ue_unconnectable": {}
        }
      },
      "widgets_values": [
        "VAE"
      ],
      "color": "#322",
      "bgcolor": "#533"
    },
    {
      "id": 114,
      "type": "SetNode",
      "pos": [
        85.21689083652058,
        2195.935878826699
      ],
      "size": [
        210,
        60
      ],
      "flags": {},
      "order": 12,
      "mode": 0,
      "inputs": [
        {
          "name": "CLIP",
          "type": "CLIP",
          "link": 1072
        }
      ],
      "outputs": [
        {
          "name": "*",
          "type": "*",
          "links": null
        }
      ],
      "title": "Set_CLIP",
      "properties": {
        "previousName": "CLIP",
        "ue_properties": {
          "version": "7.5.1",
          "widget_ue_connectable": {},
          "input_ue_unconnectable": {}
        }
      },
      "widgets_values": [
        "CLIP"
      ],
      "color": "#432",
      "bgcolor": "#653"
    },
    {
      "id": 115,
      "type": "SetNode",
      "pos": [
        420.3173355326053,
        1888.818034583826
      ],
      "size": [
        210,
        60
      ],
      "flags": {},
      "order": 24,
      "mode": 0,
      "inputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "link": 1073
        }
      ],
      "outputs": [
        {
          "name": "*",
          "type": "*",
          "links": null
        }
      ],
      "title": "Set_MODEL",
      "properties": {
        "previousName": "MODEL",
        "ue_properties": {
          "version": "7.5.1",
          "widget_ue_connectable": {},
          "input_ue_unconnectable": {}
        }
      },
      "widgets_values": [
        "MODEL"
      ],
      "color": "#223",
      "bgcolor": "#335"
    },
    {
      "id": 565,
      "type": "WanVideoNAG",
      "pos": [
        1548.5045883897162,
        1863.0399168183137
      ],
      "size": [
        270,
        150
      ],
      "flags": {},
      "order": 19,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 925
        },
        {
          "name": "conditioning",
          "type": "CONDITIONING",
          "link": 921
        }
      ],
      "outputs": [
        {
          "name": "model",
          "type": "MODEL",
          "links": [
            926
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "1.1.2",
        "Node name for S&R": "WanVideoNAG",
        "ue_properties": {
          "version": "7.5.1",
          "widget_ue_connectable": {},
          "input_ue_unconnectable": {}
        }
      },
      "widgets_values": [
        11,
        0.25,
        2.5,
        "default"
      ],
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 545,
      "type": "CLIPTextEncode",
      "pos": [
        1056.8977514827347,
        1713.9671390055084
      ],
      "size": [
        364.9524767932753,
        149.55663758265064
      ],
      "flags": {
        "collapsed": false
      },
      "order": 15,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 862
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "slot_index": 0,
          "links": [
            786
          ]
        }
      ],
      "title": "CLIP Text Encode (Positive Prompt)",
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.34",
        "Node name for S&R": "CLIPTextEncode",
        "ue_properties": {
          "version": "7.5.1",
          "widget_ue_connectable": {},
          "input_ue_unconnectable": {}
        }
      },
      "widgets_values": [
        ""
      ],
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 491,
      "type": "CLIPTextEncode",
      "pos": [
        1045.8545108614194,
        1941.000680504301
      ],
      "size": [
        380,
        150
      ],
      "flags": {},
      "order": 14,
      "mode": 0,
      "inputs": [
        {
          "name": "clip",
          "type": "CLIP",
          "link": 780
        }
      ],
      "outputs": [
        {
          "name": "CONDITIONING",
          "type": "CONDITIONING",
          "slot_index": 0,
          "links": [
            787,
            921
          ]
        }
      ],
      "title": "CLIP Text Encode (Negative Prompt)",
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.34",
        "Node name for S&R": "CLIPTextEncode",
        "ue_properties": {
          "version": "7.5.1",
          "widget_ue_connectable": {},
          "input_ue_unconnectable": {}
        }
      },
      "widgets_values": [
        "过曝，静态，细节模糊不清，字幕，风格，作品，画作，画面，静止，整体发灰，最差质量，低质量，JPEG压缩残留，丑陋的，残缺的，多余的手指，画得不好的手部，画得不好的脸部，畸形的，毁容的，形态畸形的肢体，手指融合，静止不动的画面，杂乱的背景，三条腿，背景人很多，倒着走,过曝，sun, bright"
      ],
      "color": "#322",
      "bgcolor": "#533"
    },
    {
      "id": 496,
      "type": "Power Lora Loader (rgthree)",
      "pos": [
        1410.9984669729315,
        2152.320161407297
      ],
      "size": [
        580,
        220
      ],
      "flags": {},
      "order": 29,
      "mode": 0,
      "inputs": [
        {
          "dir": 3,
          "name": "model",
          "type": "MODEL",
          "link": 924
        },
        {
          "dir": 3,
          "name": "clip",
          "type": "CLIP",
          "link": 782
        }
      ],
      "outputs": [
        {
          "dir": 4,
          "name": "MODEL",
          "shape": 3,
          "type": "MODEL",
          "links": [
            1063
          ]
        },
        {
          "dir": 4,
          "name": "CLIP",
          "shape": 3,
          "type": "CLIP",
          "links": []
        }
      ],
      "properties": {
        "cnr_id": "rgthree-comfy",
        "ver": "6c5f7c95ed8487fe08e42bd0341cae6dc9c0f0ad",
        "Show Strengths": "Single Strength",
        "ue_properties": {
          "version": "7.5.1",
          "widget_ue_connectable": {},
          "input_ue_unconnectable": {}
        }
      },
      "widgets_values": [
        {},
        {
          "type": "PowerLoraLoaderHeaderWidget"
        },
        {
          "on": true,
          "lora": "lightx2v_T2V_14B_cfg_step_distill_v2_lora_rank64_bf16.safetensors",
          "strength": 1,
          "strengthTwo": null
        },
        {
          "on": false,
          "lora": "wan\\fantasy\\lora-000009.TA_trained.safetensors",
          "strength": 1,
          "strengthTwo": null
        },
        {},
        ""
      ],
      "color": "#323",
      "bgcolor": "#535"
    },
    {
      "id": 497,
      "type": "ModelSamplingSD3",
      "pos": [
        1992.1356982703235,
        1935.4710415244494
      ],
      "size": [
        280,
        58
      ],
      "flags": {},
      "order": 23,
      "mode": 4,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 926
        }
      ],
      "outputs": [
        {
          "name": "MODEL",
          "type": "MODEL",
          "slot_index": 0,
          "links": [
            822,
            924
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.34",
        "Node name for S&R": "ModelSamplingSD3",
        "ue_properties": {
          "version": "7.5.1",
          "widget_ue_connectable": {},
          "input_ue_unconnectable": {}
        }
      },
      "widgets_values": [
        4
      ],
      "color": "#232",
      "bgcolor": "#353"
    },
    {
      "id": 522,
      "type": "KSamplerAdvanced",
      "pos": [
        3829.6560611256623,
        1970.5630867451778
      ],
      "size": [
        480,
        608.6666870117188
      ],
      "flags": {},
      "order": 47,
      "mode": 0,
      "inputs": [
        {
          "name": "model",
          "type": "MODEL",
          "link": 1064
        },
        {
          "name": "positive",
          "type": "CONDITIONING",
          "link": 830
        },
        {
          "name": "negative",
          "type": "CONDITIONING",
          "link": 831
        },
        {
          "name": "latent_image",
          "type": "LATENT",
          "link": 832
        },
        {
          "name": "noise_seed",
          "type": "INT",
          "widget": {
            "name": "noise_seed"
          },
          "link": 833
        },
        {
          "name": "steps",
          "type": "INT",
          "widget": {
            "name": "steps"
          },
          "link": 834
        },
        {
          "name": "start_at_step",
          "type": "INT",
          "widget": {
            "name": "start_at_step"
          },
          "link": 835
        },
        {
          "name": "end_at_step",
          "type": "INT",
          "widget": {
            "name": "end_at_step"
          },
          "link": 836
        }
      ],
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": [
            784
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.33",
        "Node name for S&R": "KSamplerAdvanced",
        "ue_properties": {
          "version": "7.5.1",
          "widget_ue_connectable": {},
          "input_ue_unconnectable": {}
        }
      },
      "widgets_values": [
        "enable",
        234299849652594,
        "fixed",
        15,
        1,
        "uni_pc",
        "beta",
        3,
        15,
        "disable"
      ]
    },
    {
      "id": 616,
      "type": "LoadImagesFromFolderKJ",
      "pos": [
        711.3816084369632,
        4251.861857741256
      ],
      "size": [
        290.5201171875,
        262
      ],
      "flags": {},
      "order": 10,
      "mode": 0,
      "inputs": [],
      "outputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "links": [
            1054
          ]
        },
        {
          "name": "mask",
          "type": "MASK",
          "links": null
        },
        {
          "name": "count",
          "type": "INT",
          "links": [
            1060,
            1062,
            1070
          ]
        },
        {
          "name": "image_path",
          "type": "STRING",
          "links": null
        }
      ],
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "1.1.9",
        "Node name for S&R": "LoadImagesFromFolderKJ",
        "ue_properties": {
          "widget_ue_connectable": {},
          "input_ue_unconnectable": {},
          "version": "7.5.1"
        }
      },
      "widgets_values": [
        "/code/comfyui_sandbox/video_renders/render_nfs_4screens_5_sdxl_1",
        1920,
        1080,
        "crop",
        250,
        160,
        false
      ]
    },
    {
      "id": 500,
      "type": "TrimVideoLatent",
      "pos": [
        4719.284843575809,
        1955.0526394033352
      ],
      "size": [
        250,
        60
      ],
      "flags": {
        "collapsed": false
      },
      "order": 48,
      "mode": 0,
      "inputs": [
        {
          "name": "samples",
          "type": "LATENT",
          "link": 784
        },
        {
          "name": "trim_amount",
          "type": "INT",
          "widget": {
            "name": "trim_amount"
          },
          "link": 785
        }
      ],
      "outputs": [
        {
          "name": "LATENT",
          "type": "LATENT",
          "links": [
            794
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.34",
        "Node name for S&R": "TrimVideoLatent",
        "ue_properties": {
          "version": "7.5.1",
          "widget_ue_connectable": {
            "trim_amount": true
          },
          "input_ue_unconnectable": {}
        }
      },
      "widgets_values": [
        0
      ]
    },
    {
      "id": 502,
      "type": "VAEDecode",
      "pos": [
        4836.161928823602,
        2417.3180837146233
      ],
      "size": [
        180,
        50
      ],
      "flags": {
        "collapsed": false
      },
      "order": 49,
      "mode": 0,
      "inputs": [
        {
          "name": "samples",
          "type": "LATENT",
          "link": 794
        },
        {
          "name": "vae",
          "type": "VAE",
          "link": 795
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "slot_index": 0,
          "links": [
            948,
            990,
            1066
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.34",
        "Node name for S&R": "VAEDecode",
        "ue_properties": {
          "version": "7.5.1",
          "widget_ue_connectable": {},
          "input_ue_unconnectable": {}
        }
      },
      "widgets_values": [],
      "color": "#322",
      "bgcolor": "#533"
    },
    {
      "id": 622,
      "type": "ColorMatch",
      "pos": [
        5285.748550769833,
        2437.826997750929
      ],
      "size": [
        270,
        126
      ],
      "flags": {},
      "order": 52,
      "mode": 0,
      "inputs": [
        {
          "name": "image_ref",
          "type": "IMAGE",
          "link": 1065
        },
        {
          "name": "image_target",
          "type": "IMAGE",
          "link": 1066
        }
      ],
      "outputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "links": [
            1067
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "1.1.9",
        "Node name for S&R": "ColorMatch",
        "ue_properties": {
          "widget_ue_connectable": {},
          "input_ue_unconnectable": {},
          "version": "7.5.1"
        }
      },
      "widgets_values": [
        "mkl",
        1,
        true
      ]
    },
    {
      "id": 578,
      "type": "VHS_VideoCombine",
      "pos": [
        4685.052273751546,
        2762.649087204975
      ],
      "size": [
        521.4673226853083,
        632.1648161883413
      ],
      "flags": {},
      "order": 51,
      "mode": 0,
      "inputs": [
        {
          "label": "images",
          "name": "images",
          "type": "IMAGE",
          "link": 990
        },
        {
          "label": "audio",
          "name": "audio",
          "shape": 7,
          "type": "AUDIO",
          "link": null
        },
        {
          "label": "meta_batch",
          "name": "meta_batch",
          "shape": 7,
          "type": "VHS_BatchManager",
          "link": null
        },
        {
          "label": "vae",
          "name": "vae",
          "shape": 7,
          "type": "VAE",
          "link": null
        }
      ],
      "outputs": [
        {
          "label": "Filenames",
          "name": "Filenames",
          "type": "VHS_FILENAMES"
        }
      ],
      "properties": {
        "cnr_id": "comfyui-videohelpersuite",
        "ver": "0a75c7958fe320efcb052f1d9f8451fd20c730a8",
        "Node name for S&R": "VHS_VideoCombine",
        "ue_properties": {
          "version": "7.5.1",
          "widget_ue_connectable": {
            "frame_rate": true,
            "loop_count": true,
            "filename_prefix": true,
            "format": true,
            "pingpong": true,
            "save_output": true
          },
          "input_ue_unconnectable": {}
        }
      },
      "widgets_values": {
        "frame_rate": 16,
        "loop_count": 0,
        "filename_prefix": "vace_repaint_out",
        "format": "video/h264-mp4",
        "pix_fmt": "yuv420p",
        "crf": 19,
        "save_metadata": true,
        "trim_to_audio": false,
        "pingpong": false,
        "save_output": false,
        "videopreview": {
          "paused": false,
          "hidden": false,
          "params": {
            "filename": "vace_repaint_out_00019.mp4",
            "workflow": "vace_repaint_out_00019.png",
            "fullpath": "/code/ComfyUI/temp/vace_repaint_out_00019.mp4",
            "format": "video/h264-mp4",
            "subfolder": "",
            "type": "temp",
            "frame_rate": 16
          }
        }
      }
    },
    {
      "id": 606,
      "type": "RepeatImageBatch",
      "pos": [
        4737.7297637793945,
        4001.998300060678
      ],
      "size": [
        220,
        60
      ],
      "flags": {},
      "order": 40,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 1026
        },
        {
          "name": "amount",
          "type": "INT",
          "widget": {
            "name": "amount"
          },
          "link": 1030
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            1031
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.38",
        "Node name for S&R": "RepeatImageBatch",
        "ue_properties": {
          "widget_ue_connectable": {
            "amount": true
          },
          "version": "7.5.1",
          "input_ue_unconnectable": {}
        }
      },
      "widgets_values": [
        3
      ],
      "color": "#222",
      "bgcolor": "#000",
      "shape": 1
    },
    {
      "id": 602,
      "type": "InsertImagesToBatchIndexed",
      "pos": [
        4925.671130232534,
        4221.158232852774
      ],
      "size": [
        400,
        200
      ],
      "flags": {},
      "order": 42,
      "mode": 0,
      "inputs": [
        {
          "name": "original_images",
          "type": "IMAGE",
          "link": 1032
        },
        {
          "name": "images_to_insert",
          "type": "IMAGE",
          "link": 1031
        },
        {
          "name": "indexes",
          "type": "STRING",
          "widget": {
            "name": "indexes"
          },
          "link": 1049
        }
      ],
      "outputs": [
        {
          "name": "IMAGE",
          "type": "IMAGE",
          "links": [
            1034,
            1035
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfyui-kjnodes",
        "ver": "1.1.9",
        "Node name for S&R": "InsertImagesToBatchIndexed",
        "ue_properties": {
          "widget_ue_connectable": {},
          "input_ue_unconnectable": {},
          "version": "7.5.1"
        }
      },
      "widgets_values": [
        "0, 3, 4, 6, 7, 9, 10, 12, 13, 15, 16, 18, 19, 21, 22, 24, 25, 27, 28, 30, 31, 33, 34, 36, 37, 39, 40, 42, 43, 45, 46, 48, 49, 51, 52, 54",
        "replace"
      ]
    },
    {
      "id": 608,
      "type": "ImageToMask",
      "pos": [
        5315.654348211207,
        4010.389368745624
      ],
      "size": [
        270,
        58
      ],
      "flags": {},
      "order": 44,
      "mode": 0,
      "inputs": [
        {
          "name": "image",
          "type": "IMAGE",
          "link": 1035
        }
      ],
      "outputs": [
        {
          "name": "MASK",
          "type": "MASK",
          "links": [
            1046
          ]
        }
      ],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.68",
        "Node name for S&R": "ImageToMask",
        "ue_properties": {
          "widget_ue_connectable": {},
          "input_ue_unconnectable": {},
          "version": "7.5.1"
        }
      },
      "widgets_values": [
        "red"
      ]
    },
    {
      "id": 601,
      "type": "PreviewImage",
      "pos": [
        5529.304313051329,
        4346.111136458141
      ],
      "size": [
        211.08592298185613,
        358.58796931918005
      ],
      "flags": {},
      "order": 43,
      "mode": 4,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 1034
        }
      ],
      "outputs": [],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.68",
        "Node name for S&R": "PreviewImage",
        "ue_properties": {
          "widget_ue_connectable": {},
          "input_ue_unconnectable": {},
          "version": "7.5.1"
        }
      },
      "widgets_values": []
    },
    {
      "id": 609,
      "type": "PreviewImage",
      "pos": [
        5495.055045798479,
        4766.307697332324
      ],
      "size": [
        271.0439667397186,
        337.55119903296145
      ],
      "flags": {},
      "order": 37,
      "mode": 4,
      "inputs": [
        {
          "name": "images",
          "type": "IMAGE",
          "link": 1037
        }
      ],
      "outputs": [],
      "properties": {
        "cnr_id": "comfy-core",
        "ver": "0.3.68",
        "Node name for S&R": "PreviewImage",
        "ue_properties": {
          "widget_ue_connectable": {},
          "input_ue_unconnectable": {},
          "version": "7.5.1"
        }
      },
      "widgets_values": []
    },
    {
      "id": 55,
      "type": "MarkdownNote",
      "pos": [
        35.244935750057174,
        438.7236945147936
      ],
      "size": [
        1118.3692556174378,
        1159.881195219392
      ],
      "flags": {},
      "order": 11,
      "mode": 0,
      "inputs": [],
      "outputs": [],
      "properties": {
        "ue_properties": {
          "version": "7.5.1",
          "widget_ue_connectable": {},
          "input_ue_unconnectable": {}
        }
      },
      "widgets_values": [
        "# Wan2.1 Video Generation (VACE)\n\n[**Tutorial**](https://docs.comfy.org/tutorials/video/wan/vace) | [**教程 (中文)**](https://docs.comfy.org/zh-CN/tutorials/video/wan/vace)\n\n---\n\n## 🧠 Diffusion Models\n\n- [SkyReels-V2-T2V-14B-720P-VACE-GGUF](https://huggingface.co/QuantStack/SkyReels-V2-T2V-14B-720P-VACE-GGUF) (finetuned in 720p@24fps)\n- [Wan-14B-T2V-FusionX-VACE-GGUF](https://huggingface.co/QuantStack/Wan-14B-T2V-FusionX-VACE-GGUF) (high-quality merge by [vrgamedevgirl](https://civitai.com/models/1651125))\n- [MoviiGen1.1-VACE-GGUF](https://huggingface.co/QuantStack/MoviiGen1.1-VACE-GGUF) (finetuned on cinematic shots in 720p and up)\n- [Wan2.1-VACE-14B-GGUF](https://huggingface.co/QuantStack/Wan2.1-VACE-14B-GGUF) (base model 480p@16fps)\n\n---\n\n## 🎨 VAE\n\n- [wan_2.1_vae.safetensors](https://huggingface.co/Comfy-Org/Wan_2.1_ComfyUI_repackaged/resolve/main/split_files/vae/wan_2.1_vae.safetensors?download=true)\n\n---\n\n## 📝 Text Encoders  \nChoose **one** of the following:\n\n- [umt5_xxl_fp16.safetensors](https://huggingface.co/Comfy-Org/Wan_2.1_ComfyUI_repackaged/resolve/main/split_files/text_encoders/umt5_xxl_fp16.safetensors?download=true)  \n- [umt5_xxl_fp8_e4m3fn_scaled.safetensors](https://huggingface.co/Comfy-Org/Wan_2.1_ComfyUI_repackaged/resolve/main/split_files/text_encoders/umt5_xxl_fp8_e4m3fn_scaled.safetensors?download=true)  \n- [umt5-xxl-encoder-gguf](https://huggingface.co/city96/umt5-xxl-encoder-gguf/tree/main)  \n\n> You can choose between .fp16, .fp8, or GGUF versions.\n\n---\n\n## 🔧 Optional LoRA Models\n\nThese LoRA adapters can optionally be applied to enhance or accelerate generation. Choose based on your use case:\n\n### 🚀 Speed Optimization\n\n#### 🔁 CausVid LoRAs\n\nCausVid LoRAs are experimental derivatives of the CausVid fine-tunes. The goal is to benefit from the temporal distillation in CausVid, rather than perform true causal inference.\n\n- **v1** – A direct extraction from the CausVid fine-tune. May degrade motion quality and introduce flashing artifacts at full strength.  \n  🔗 [Download v1](https://huggingface.co/Kijai/WanVideo_comfy/blob/main/Wan21_CausVid_14B_T2V_lora_rank32.safetensors)\n\n- **v1.5** – Identical to v1 but with the first block removed, resolving the flashing issue while preserving similar motion characteristics.  \n  🔗 [Download v1.5](https://huggingface.co/Kijai/WanVideo_comfy/blob/main/Wan21_CausVid_14B_T2V_lora_rank32_v1_5_no_first_block.safetensors)\n\n- **v2** – A further pruned version that retains only the attention layers (first block removed). Fixes flashing, improves motion preservation, and benefits from more inference steps and higher CFG (classifier-free guidance).  \n  🔗 [Download v2](https://huggingface.co/Kijai/WanVideo_comfy/blob/main/Wan21_CausVid_14B_T2V_lora_rank32_v2.safetensors)  \n\n🧠 Based on the [**CausVid framework**](https://aejion.github.io/accvideo/), converting a bidirectional transformer into an autoregressive one with streaming support.\n\n#### 🏎️ AccVid LoRA\n\n- [**Wan21_AccVid_T2V_14B_lora_rank32_fp16.safetensors**](https://huggingface.co/Kijai/WanVideo_comfy/blob/main/Wan21_AccVid_T2V_14B_lora_rank32_fp16.safetensors)  \n  Built on the [**AccVideo framework**](https://aejion.github.io/accvideo/), using trajectory-based few-step distillation from synthetic data for faster, more efficient inference.\n\n### 🎬 Cinematic Quality\n\n- [Wan21_T2V_14B_MoviiGen_lora_rank32_fp16.safetensors](https://huggingface.co/Kijai/WanVideo_comfy/blob/main/Wan21_T2V_14B_MoviiGen_lora_rank32_fp16.safetensors)  \n  Fine-tuned from [**MoviiGen 1.1**](https://huggingface.co/ZuluVision/MoviiGen1.1), optimized for **cinematic visual quality**. \n\n### 🏆 Preference-Driven Rewards\n\n- [Wan2.1-Fun-14B-InP-MPS.safetensors](https://huggingface.co/alibaba-pai/Wan2.1-Fun-Reward-LoRAs/blob/main/Wan2.1-Fun-14B-InP-MPS.safetensors)  \n  Powered by [**MPS**](https://github.com/Kwai-Kolors/MPS), a CLIP-based scoring model trained on 918K human preference choices across four dimensions: aesthetics, semantic alignment, detail quality, and overall quality.\n\n- [Wan2.1-Fun-14B-InP-HPS2.1.safetensors](https://huggingface.co/alibaba-pai/Wan2.1-Fun-Reward-LoRAs/blob/main/Wan2.1-Fun-14B-InP-HPS2.1.safetensors)  \n  Built on [**HPS v2**](https://github.com/tgxs002/HPSv2), fine-tuned on 798K human-labeled image pairs. Provides more accurate and generalizable human preference feedback for text-to-video models.\n\n---\n\n## 📁 File Save Structure\n\nSave all required files into the following directory structure under your ComfyUI/ folder:\n\nFile save location\n\n```\nComfyUI/\n├── models/\n│   ├── loras/\n│   │   └─── Wan21_CausVid_14B_T2V_lora_rank32.safetensors\n│   ├── unet/\n│   │   └─── MoviiGen1.1-VACE-Qx_x_x.gguf\n│   ├── text_encoders/\n│   │   └─── umt5_xxl_fp8_e4m3fn_scaled.safetensors # or GGUF (umt5-xxl-encoder-Qx_x.gguf)\n│   └── vae/\n│       └──  wan_2.1_vae.safetensors\n\n```\n"
      ],
      "color": "#432",
      "bgcolor": "#653"
    }
  ],
  "links": [
    [
      118,
      41,
      0,
      113,
      0,
      "*"
    ],
    [
      704,
      49,
      0,
      429,
      0,
      "MODEL"
    ],
    [
      780,
      489,
      0,
      491,
      0,
      "CLIP"
    ],
    [
      782,
      489,
      0,
      496,
      1,
      "CLIP"
    ],
    [
      784,
      522,
      0,
      500,
      0,
      "LATENT"
    ],
    [
      785,
      501,
      3,
      500,
      1,
      "INT"
    ],
    [
      786,
      545,
      0,
      501,
      0,
      "CONDITIONING"
    ],
    [
      787,
      491,
      0,
      501,
      1,
      "CONDITIONING"
    ],
    [
      788,
      490,
      0,
      501,
      2,
      "VAE"
    ],
    [
      794,
      500,
      0,
      502,
      0,
      "LATENT"
    ],
    [
      795,
      490,
      0,
      502,
      1,
      "VAE"
    ],
    [
      822,
      497,
      0,
      521,
      0,
      "MODEL"
    ],
    [
      823,
      501,
      0,
      521,
      1,
      "CONDITIONING"
    ],
    [
      824,
      501,
      1,
      521,
      2,
      "CONDITIONING"
    ],
    [
      825,
      501,
      2,
      521,
      3,
      "LATENT"
    ],
    [
      826,
      499,
      0,
      521,
      4,
      "INT"
    ],
    [
      827,
      494,
      0,
      521,
      5,
      "INT"
    ],
    [
      828,
      495,
      0,
      521,
      6,
      "INT"
    ],
    [
      830,
      501,
      0,
      522,
      1,
      "CONDITIONING"
    ],
    [
      831,
      501,
      1,
      522,
      2,
      "CONDITIONING"
    ],
    [
      832,
      521,
      0,
      522,
      3,
      "LATENT"
    ],
    [
      833,
      499,
      0,
      522,
      4,
      "INT"
    ],
    [
      834,
      494,
      0,
      522,
      5,
      "INT"
    ],
    [
      835,
      495,
      0,
      522,
      6,
      "INT"
    ],
    [
      836,
      494,
      0,
      522,
      7,
      "INT"
    ],
    [
      862,
      489,
      0,
      545,
      0,
      "CLIP"
    ],
    [
      921,
      491,
      0,
      565,
      1,
      "CONDITIONING"
    ],
    [
      924,
      497,
      0,
      496,
      0,
      "MODEL"
    ],
    [
      925,
      488,
      0,
      565,
      0,
      "MODEL"
    ],
    [
      926,
      565,
      0,
      497,
      0,
      "MODEL"
    ],
    [
      941,
      572,
      0,
      574,
      0,
      "IMAGE"
    ],
    [
      942,
      574,
      0,
      575,
      0,
      "IMAGE"
    ],
    [
      943,
      572,
      0,
      501,
      3,
      "IMAGE"
    ],
    [
      944,
      574,
      0,
      501,
      5,
      "IMAGE"
    ],
    [
      945,
      572,
      1,
      501,
      6,
      "INT"
    ],
    [
      946,
      572,
      2,
      501,
      7,
      "INT"
    ],
    [
      947,
      568,
      0,
      576,
      0,
      "IMAGE"
    ],
    [
      948,
      502,
      0,
      568,
      0,
      "IMAGE"
    ],
    [
      949,
      572,
      0,
      568,
      1,
      "IMAGE"
    ],
    [
      990,
      502,
      0,
      578,
      0,
      "IMAGE"
    ],
    [
      995,
      586,
      0,
      584,
      1,
      "INT"
    ],
    [
      997,
      586,
      0,
      585,
      1,
      "INT"
    ],
    [
      998,
      585,
      0,
      587,
      0,
      "INT"
    ],
    [
      999,
      587,
      0,
      588,
      0,
      "STRING"
    ],
    [
      1000,
      588,
      0,
      589,
      0,
      "STRING"
    ],
    [
      1001,
      582,
      0,
      590,
      0,
      "IMAGE"
    ],
    [
      1002,
      584,
      0,
      590,
      1,
      "IMAGE"
    ],
    [
      1003,
      588,
      0,
      590,
      2,
      "STRING"
    ],
    [
      1005,
      590,
      0,
      572,
      0,
      "IMAGE"
    ],
    [
      1014,
      597,
      0,
      599,
      0,
      "MASK"
    ],
    [
      1016,
      599,
      0,
      596,
      0,
      "IMAGE"
    ],
    [
      1019,
      582,
      1,
      597,
      0,
      "INT"
    ],
    [
      1020,
      582,
      2,
      597,
      1,
      "INT"
    ],
    [
      1023,
      582,
      1,
      604,
      0,
      "INT"
    ],
    [
      1024,
      582,
      2,
      604,
      1,
      "INT"
    ],
    [
      1025,
      604,
      0,
      605,
      0,
      "MASK"
    ],
    [
      1026,
      605,
      0,
      606,
      0,
      "IMAGE"
    ],
    [
      1028,
      586,
      0,
      603,
      1,
      "INT"
    ],
    [
      1029,
      596,
      0,
      603,
      0,
      "IMAGE"
    ],
    [
      1030,
      603,
      1,
      606,
      1,
      "INT"
    ],
    [
      1031,
      606,
      0,
      602,
      1,
      "IMAGE"
    ],
    [
      1032,
      596,
      0,
      602,
      0,
      "IMAGE"
    ],
    [
      1034,
      602,
      0,
      601,
      0,
      "IMAGE"
    ],
    [
      1035,
      602,
      0,
      608,
      0,
      "IMAGE"
    ],
    [
      1037,
      590,
      0,
      609,
      0,
      "IMAGE"
    ],
    [
      1046,
      608,
      0,
      501,
      4,
      "MASK"
    ],
    [
      1049,
      588,
      0,
      602,
      2,
      "STRING"
    ],
    [
      1054,
      616,
      0,
      618,
      0,
      "IMAGE"
    ],
    [
      1058,
      618,
      0,
      582,
      0,
      "IMAGE"
    ],
    [
      1059,
      582,
      0,
      584,
      0,
      "IMAGE"
    ],
    [
      1060,
      616,
      2,
      585,
      0,
      "INT"
    ],
    [
      1062,
      616,
      2,
      501,
      8,
      "INT"
    ],
    [
      1063,
      496,
      0,
      621,
      0,
      "MODEL"
    ],
    [
      1064,
      621,
      0,
      522,
      0,
      "MODEL"
    ],
    [
      1065,
      582,
      0,
      622,
      0,
      "IMAGE"
    ],
    [
      1066,
      502,
      0,
      622,
      1,
      "IMAGE"
    ],
    [
      1067,
      622,
      0,
      623,
      0,
      "IMAGE"
    ],
    [
      1070,
      616,
      2,
      596,
      1,
      "INT"
    ],
    [
      1072,
      51,
      0,
      114,
      0,
      "CLIP"
    ],
    [
      1073,
      429,
      0,
      115,
      0,
      "MODEL"
    ],
    [
      1074,
      36,
      0,
      49,
      0,
      "MODEL"
    ]
  ],
  "groups": [
    {
      "id": 18,
      "title": "Video Repaint 重繪",
      "bounding": [
        662.9565248869263,
        1612.772050848587,
        5150.423056911891,
        3049.005256618935
      ],
      "color": "#88A",
      "font_size": 24,
      "flags": {}
    }
  ],
  "config": {},
  "extra": {
    "ue_links": [],
    "ds": {
      "scale": 1.0610764609500174,
      "offset": [
        -1348.231151006586,
        -3631.4873660850176
      ]
    },
    "links_added_by_ue": [],
    "frontendVersion": "1.28.8",
    "VHS_latentpreview": false,
    "VHS_latentpreviewrate": 0,
    "VHS_MetadataImage": true,
    "VHS_KeepIntermediate": true
  },
  "version": 0.4
}